<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Giftastic</title>
</head>

<body>

    <!--Div to place new buttons-->
    <div id="animals-buttons"></div>

    <!--Text box to submit new animal-->
    <form action="/action_page.php">
        Add an animal:<br>
        <input id="typeAnimal" type="text" name="animal" placeholder="animal"><br>
        <input id="add-animal" type="submit">
    </form>

    <!--Div to place gifs-->
    <div id="gifPlace"></div>

</body>
<!--Link to jquery-->
<script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>

<script type="text/javascript">
    //pseudocode
    //array of gifs that will be pushed to the button and will have their data-search changed to the value of what they searched. 
    var gifArray = ["dog", "cat", "lizard", "bunny"]

    function addNewAnimal() {
        $("#gifPlace").empty();
        $("#animals-buttons").empty();
        for (var i = 0; i < gifArray.length; i++) {
            var addButton = $("<button>");
            addButton.attr("data-search", gifArray[i]);
            addButton.text(gifArray[i]);
            $("#animals-buttons").append(addButton);
        }
    }
    //text box name animal, it will have a value of the string
    //when user clicks on submit, 
    $("#add-animal").on("click", function (event) {
        event.preventDefault();
        var newGifForArray = $("#typeAnimal").val().trim();
        gifArray.push(newGifForArray);
        addNewAnimal();
    });
    addNewAnimal();

    //we will create a button with a data-search of the value of the searched term and it will bring back the gif
    $(document.body).on("click", "button", function () {
        //on the second click, the others should be erased. 
        //helps me search for the specific button i clicked 
        var x = $(this).data("search");
        console.log(x);
        //the button will show the text of the string
        //that will return a gif with ajax
        var queryUrl = "http://api.giphy.com/v1/gifs/search?q=" + x + "&api_key=FfIZHo4MWd2HmAeP1L4bTYYAMRvoG4Z4&limit=20";
        console.log(queryUrl);
        $.ajax({ url: queryUrl, method: "GET" })
            .done(function (response) {
                $("#gifPlace").empty();
                console.log(response);
                for (var i = 0; i < response.data.length; i++) {
                    //adds the div and the p to add the gif that appears
                    var animalGif = $("<div>");
                    var p = $("<p>").text("Rating: " + response.data[i].rating);
                    var animalImage = $("<img>");
                    animalImage.attr('src', response.data[i].images.downsized.url);
                    animalGif.append(p);
                    animalGif.append(animalImage);
                    $("#gifPlace").append(animalGif);
                }
            })
    });

//create an image of the gif
//run gif
//stop gif

//cuando agrego un boton aparece el array otra vez los 4 en vez de nomas el que agregue y no funcionan los otros botones y no se agrega el texto 
</script>

</html>